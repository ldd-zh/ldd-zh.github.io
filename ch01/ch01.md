# 第1章 设备驱动简介

自由操作系统的众多优势之一，以Linux为代表，是其内部代码对所有人开放。操作系统曾经是一个神秘且代码受限的领域，只有少数程序员能够接触，而现在，任何具备相应技能的人都可以轻松查看、理解和修改它。Linux帮助实现了操作系统的民主化。然而，Linux内核仍然是一个庞大且复杂的代码体，想要成为内核黑客的人需要一个切入点，以便在不被复杂性压倒的情况下接近代码。通常，设备驱动程序就是这个切入点。

设备驱动程序在Linux内核中扮演着特殊的角色。它们是独立的“黑匣子”，使得特定的硬件能够响应定义良好的内部编程接口；它们完全隐藏了设备的工作细节。用户活动通过一组标准化的调用来执行，这些调用与具体的驱动程序无关；将这些调用映射到实际硬件上的设备特定操作，则是设备驱动程序的任务。这种编程接口使得驱动程序可以与内核的其他部分分开构建，并在需要时“插入”运行时。这种模块化使得Linux驱动程序易于编写，以至于现在有数百个驱动程序可用。

编写Linux设备驱动程序有很多理由。新硬件推出（和淘汰！）的速度本身就保证了驱动程序编写者在可预见的未来会非常忙碌。个人可能需要了解驱动程序，以便访问他们感兴趣的特定设备。硬件供应商通过为其产品提供Linux驱动程序，可以将庞大且不断增长的Linux用户群纳入其潜在市场。而Linux系统的开源性质意味着，如果驱动程序编写者愿意，驱动程序的源代码可以迅速传播给数百万用户。

本书将教你如何编写自己的驱动程序，以及如何在内核的相关部分进行修改。我们采用了设备无关的方法；编程技术和接口尽可能在不绑定任何特定设备的情况下呈现。每个驱动程序都不同；作为驱动程序编写者，你需要深入了解你的特定设备。但大多数原则和基本技术对所有驱动程序都是相同的。本书无法教你关于你的设备的知识，但它为你提供了使设备工作所需的背景知识。

在学习编写驱动程序的过程中，你会对Linux内核有更深入的了解；这可能会帮助你理解你的机器是如何工作的，以及为什么事情并不总是像你期望的那样快，或者为什么它们不完全按照你的意愿行事。我们逐步引入新概念，从非常简单的驱动程序开始，并在此基础上构建；每个新概念都伴随着不需要特殊硬件即可测试的示例代码。

本章实际上并没有涉及编写代码。然而，我们介绍了一些关于Linux内核的背景概念，这些概念在你开始编程时会很有用。
